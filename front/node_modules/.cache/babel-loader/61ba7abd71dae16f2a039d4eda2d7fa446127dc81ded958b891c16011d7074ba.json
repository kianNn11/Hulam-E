{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./Profile.css';import{PencilSquareIcon,UserCircleIcon}from\"@heroicons/react/24/outline\";import{Link,useLocation}from'react-router-dom';import EditProfileModal from'./EditProfileModal';import StudentVerificationModal from'./StudentVerificationModal';import PostContent from'./PostContent';import EarningsContent from'./EarningsSection';import RentalManagement from'./RentalManagement';import{useAuth}from'../../Context/AuthContext';import{userAPI}from'../../services/api';import AlertMessage from'../Common/AlertMessage';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Profile=()=>{const location=useLocation();const{user,setUser,isLoggedIn}=useAuth();const[isModalOpen,setIsModalOpen]=useState(false);const[isVerificationModalOpen,setIsVerificationModalOpen]=useState(false);const[showVerificationMessage,setShowVerificationMessage]=useState(false);const[loading,setLoading]=useState(false);const[alert,setAlert]=useState({show:false,type:'',message:''});// Use user data from AuthContext instead of localStorage\nconst[profileData,setProfileData]=useState({fullName:(user===null||user===void 0?void 0:user.name)||'',courseYear:(user===null||user===void 0?void 0:user.course_year)||'',birthday:(user===null||user===void 0?void 0:user.birthday)||'',gender:(user===null||user===void 0?void 0:user.gender)||'',socialLink:(user===null||user===void 0?void 0:user.social_link)||'',contactNumber:(user===null||user===void 0?void 0:user.contact_number)||'',bio:(user===null||user===void 0?void 0:user.bio)||'',profileImage:(user===null||user===void 0?void 0:user.profile_picture)||null});const showAlert=(type,message)=>{setAlert({show:true,type,message});setTimeout(()=>setAlert({show:false,type:'',message:''}),5000);};// Update profile data when user changes\nuseEffect(()=>{if(user){setProfileData({fullName:user.name||'',courseYear:user.course_year||'',birthday:user.birthday||'',gender:user.gender||'',socialLink:user.social_link||'',contactNumber:user.contact_number||'',bio:user.bio||'',profileImage:user.profile_picture||null});}},[user]);const handleSave=async data=>{if(!isLoggedIn){showAlert('error','Please log in to update your profile');return;}// Check if user account is suspended (client-side check)\nif(user&&user.verification_status==='suspended'){showAlert('error','Account Suspended: You cannot update your profile while your account is suspended. Please contact support for assistance.');return;}// Check if user account is deactivated (client-side check)\nif(user&&user.verification_status==='inactive'){showAlert('error','Your account has been deactivated. Please contact support to reactivate your account.');return;}setLoading(true);try{// Prepare data for API\nconst updateData={name:data.fullName,course_year:data.courseYear,birthday:data.birthday,gender:data.gender,social_link:data.socialLink,contact_number:data.contactNumber,bio:data.bio,profile_picture:data.profileImage};// Remove empty values to avoid validation errors\nObject.keys(updateData).forEach(key=>{if(updateData[key]===''||updateData[key]===null){delete updateData[key];}});console.log('Sending update data:',{...updateData,profile_picture:updateData.profile_picture?`[Base64 Image - ${updateData.profile_picture.length} chars]`:'null'});// Call API to update profile\nconst response=await userAPI.updateProfile(updateData);console.log('API Response:',response.data);if(response.data.success||response.data.user){// Get the updated user data from response\nconst returnedUser=response.data.user;console.log('Returned user profile_picture:',returnedUser!==null&&returnedUser!==void 0&&returnedUser.profile_picture?`[${returnedUser.profile_picture.length} chars]`:'null');// Update local profileData state with the form data (immediate update)\nconst updatedProfileData={fullName:data.fullName,courseYear:data.courseYear,birthday:data.birthday,gender:data.gender,socialLink:data.socialLink,contactNumber:data.contactNumber,bio:data.bio,// Use the returned profile picture if available, otherwise use the submitted one\nprofileImage:(returnedUser===null||returnedUser===void 0?void 0:returnedUser.profile_picture)||data.profileImage};console.log('Setting profile data:',{...updatedProfileData,profileImage:updatedProfileData.profileImage?`[${updatedProfileData.profileImage.length} chars]`:'null'});setProfileData(updatedProfileData);// Update user in AuthContext - ensure proper field mapping\nconst updatedUser={...user,...returnedUser,// Ensure profile_picture is properly set\nprofile_picture:(returnedUser===null||returnedUser===void 0?void 0:returnedUser.profile_picture)||data.profileImage};console.log('Setting user data:',{...updatedUser,profile_picture:updatedUser.profile_picture?`[${updatedUser.profile_picture.length} chars]`:'null'});setUser(updatedUser);// Update localStorage\nlocalStorage.setItem('userData',JSON.stringify(updatedUser));showAlert('success','Profile updated successfully!');setIsModalOpen(false);// Force re-render by updating state\nsetProfileData(prev=>({...prev}));}else{throw new Error('Profile update failed - no success response');}}catch(error){var _error$response,_error$response2,_error$response3;console.error('Profile update error:',error);console.error('Error response:',(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data);// Handle different types of errors with detailed messages\nif(((_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.status)===403){var _error$restrictionDet;const data=error.response.data;// Handle suspended account with detailed restrictions\nif(data.error==='Account suspended'||((_error$restrictionDet=error.restrictionDetails)===null||_error$restrictionDet===void 0?void 0:_error$restrictionDet.type)==='suspended'){const details=error.restrictionDetails||data.restriction_details||{};const actionMessage=details.blocked_action||details.blockedAction||'updating your profile';const contactInfo=details.contact_info||details.contactInfo||'Please contact support for assistance.';showAlert('error',`Account Suspended: You cannot perform this action (${actionMessage}). ${contactInfo}`);}else if(data.error==='Account deactivated'){showAlert('error','Your account has been deactivated. Please contact support to reactivate your account.');}else{showAlert('error',data.message||'You do not have permission to update your profile.');}}else if(((_error$response3=error.response)===null||_error$response3===void 0?void 0:_error$response3.status)===422){const errorData=error.response.data;if(errorData.errors){const firstError=Object.values(errorData.errors)[0];const errorMessage=Array.isArray(firstError)?firstError[0]:firstError;showAlert('error',`Validation Error: ${errorMessage}`);}else{showAlert('error',errorData.message||'Please check your input and try again.');}}else if(!error.response){showAlert('error','Network error. Please check your internet connection and try again.');}else{var _error$response4,_error$response4$data;showAlert('error',((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.message)||error.message||'Failed to update profile. Please try again.');}}finally{setLoading(false);}};const handleCloseVerificationModal=()=>{setIsVerificationModalOpen(false);};const handleVerificationButtonClick=()=>{if(!user)return;if(user.verified){// Already verified - show verified message\nsetShowVerificationMessage(true);setTimeout(()=>setShowVerificationMessage(false),3000);}else if(user.verification_status==='pending'){// Verification pending - show pending message\nsetShowVerificationMessage(true);setTimeout(()=>setShowVerificationMessage(false),5000);}else{// Unverified (includes 'unverified', null, undefined, or any other status) - open upload modal\nsetIsVerificationModalOpen(true);}};const handleUpload=async file=>{if(!isLoggedIn||!user){showAlert('error','Please log in to submit verification documents');return;}setLoading(true);try{// Create FormData for file upload\nconst formData=new FormData();formData.append('userId',user.id);formData.append('verificationData',JSON.stringify({fileName:file.name,submittedAt:new Date().toISOString()}));formData.append('document',file);// Call the verification API\nconst response=await userAPI.verifyStudent(formData);if(response.data.success){showAlert('success','Verification document submitted successfully! Your request is now pending admin review.');// Update user verification status in context\nconst updatedUser={...user,verification_status:'pending',verification_submitted_at:new Date().toISOString()};setUser(updatedUser);localStorage.setItem('userData',JSON.stringify(updatedUser));}else{showAlert('error','Failed to submit verification document. Please try again.');}}catch(error){var _error$response5,_error$response5$data,_error$response6,_error$response6$data;console.error('Verification submission error:',error);showAlert('error',((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.error)||((_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.message)||'Failed to submit verification document. Please try again.');}finally{setLoading(false);setIsVerificationModalOpen(false);}};const activeTab=(()=>{switch(location.pathname){case'/profile':return'post';case'/earnings':return'earnings';case'/rental-management':return'rentals';default:return'';}})();// Show login message if not authenticated\nif(!isLoggedIn){return/*#__PURE__*/_jsx(\"main\",{className:\"profile\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"profile-login-message\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Please log in to view your profile\"}),/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"login-link\",children:\"Go to Login\"})]})});}return/*#__PURE__*/_jsxs(\"main\",{className:\"profile\",children:[alert.show&&/*#__PURE__*/_jsx(AlertMessage,{type:alert.type,message:alert.message,onClose:()=>setAlert({show:false,type:'',message:''}),className:\"fixed-alert\"}),/*#__PURE__*/_jsx(\"section\",{className:\"profile-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"profile-background\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-header\"}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-name-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"icon-and-name-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-image-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-image-container\",onClick:()=>setIsModalOpen(true),title:\"Click to change profile picture\",children:profileData.profileImage?/*#__PURE__*/_jsx(\"div\",{className:\"profile-image-wrapper\",children:/*#__PURE__*/_jsx(\"img\",{src:profileData.profileImage.startsWith('/storage/')?`http://localhost:8000${profileData.profileImage}`:profileData.profileImage,alt:\"Profile\",className:\"profile-image\"})}):/*#__PURE__*/_jsx(UserCircleIcon,{className:\"profile-default-icon\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsModalOpen(true),className:\"profile-edit-button\",disabled:loading,title:\"Edit Profile\",children:/*#__PURE__*/_jsx(PencilSquareIcon,{className:\"edit-icon\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-name-section\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"profile-name\",children:profileData.fullName||(user===null||user===void 0?void 0:user.name)||'Your Name'}),/*#__PURE__*/_jsx(\"p\",{className:\"profile-course\",children:profileData.courseYear||'Course & Year'}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-verification-status\",children:user!==null&&user!==void 0&&user.verified?/*#__PURE__*/_jsxs(\"div\",{className:\"verification-status-container\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"verification-verified\",children:\"\\u2713 Verified Student\"}),showVerificationMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"verification-message verified-message\",children:\"You are a verified student! \\uD83C\\uDF89\"})]}):(user===null||user===void 0?void 0:user.verification_status)==='pending'?/*#__PURE__*/_jsxs(\"div\",{className:\"verification-status-container\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"verification-pending-button\",onClick:handleVerificationButtonClick,disabled:loading,children:\"\\u23F3 Verification Pending\"}),showVerificationMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"verification-message pending-message\",children:\"Your verification is in progress. Please wait for the admin to confirm it.\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"verification-status-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"verification-button unverified\",onClick:handleVerificationButtonClick,disabled:loading,children:\"\\uD83D\\uDCCB Verify Student Status\"})})})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-nav\",children:[/*#__PURE__*/_jsx(Link,{to:\"/profile\",className:`profile-tab ${activeTab==='post'?'active':''}`,children:\"Post\"}),/*#__PURE__*/_jsx(Link,{to:\"/earnings\",className:`profile-tab ${activeTab==='earnings'?'active':''}`,children:\"Earnings\"}),/*#__PURE__*/_jsx(Link,{to:\"/rental-management\",className:`profile-tab ${activeTab==='rentals'?'active':''}`,children:\"Rentals\"})]}),activeTab==='post'&&/*#__PURE__*/_jsx(PostContent,{profileData:profileData,user:user}),activeTab==='earnings'&&/*#__PURE__*/_jsx(EarningsContent,{}),activeTab==='rentals'&&/*#__PURE__*/_jsx(RentalManagement,{})]})}),isModalOpen&&/*#__PURE__*/_jsx(EditProfileModal,{isOpen:isModalOpen,onClose:()=>setIsModalOpen(false),onSave:handleSave,profileData:profileData,user:user,loading:loading}),isVerificationModalOpen&&/*#__PURE__*/_jsx(StudentVerificationModal,{isOpen:isVerificationModalOpen,onClose:handleCloseVerificationModal,onUpload:handleUpload,loading:loading})]});};export default Profile;","map":{"version":3,"names":["React","useState","useEffect","PencilSquareIcon","UserCircleIcon","Link","useLocation","EditProfileModal","StudentVerificationModal","PostContent","EarningsContent","RentalManagement","useAuth","userAPI","AlertMessage","jsx","_jsx","jsxs","_jsxs","Profile","location","user","setUser","isLoggedIn","isModalOpen","setIsModalOpen","isVerificationModalOpen","setIsVerificationModalOpen","showVerificationMessage","setShowVerificationMessage","loading","setLoading","alert","setAlert","show","type","message","profileData","setProfileData","fullName","name","courseYear","course_year","birthday","gender","socialLink","social_link","contactNumber","contact_number","bio","profileImage","profile_picture","showAlert","setTimeout","handleSave","data","verification_status","updateData","Object","keys","forEach","key","console","log","length","response","updateProfile","success","returnedUser","updatedProfileData","updatedUser","localStorage","setItem","JSON","stringify","prev","Error","error","_error$response","_error$response2","_error$response3","status","_error$restrictionDet","restrictionDetails","details","restriction_details","actionMessage","blocked_action","blockedAction","contactInfo","contact_info","errorData","errors","firstError","values","errorMessage","Array","isArray","_error$response4","_error$response4$data","handleCloseVerificationModal","handleVerificationButtonClick","verified","handleUpload","file","formData","FormData","append","id","fileName","submittedAt","Date","toISOString","verifyStudent","verification_submitted_at","_error$response5","_error$response5$data","_error$response6","_error$response6$data","activeTab","pathname","className","children","to","onClose","onClick","title","src","startsWith","alt","disabled","isOpen","onSave","onUpload"],"sources":["C:/Users/User/Desktop/HULAME FINAL FR/front/src/Components/ProfileSection/Profile.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './Profile.css';\r\nimport { PencilSquareIcon, UserCircleIcon } from \"@heroicons/react/24/outline\";\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport EditProfileModal from './EditProfileModal';\r\nimport StudentVerificationModal from './StudentVerificationModal';\r\nimport PostContent from './PostContent';\r\nimport EarningsContent from './EarningsSection';\r\nimport RentalManagement from './RentalManagement';\r\nimport { useAuth } from '../../Context/AuthContext';\r\nimport { userAPI } from '../../services/api';\r\nimport AlertMessage from '../Common/AlertMessage';\r\n\r\nconst Profile = () => {\r\n  const location = useLocation();\r\n  const { user, setUser, isLoggedIn } = useAuth();\r\n\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [isVerificationModalOpen, setIsVerificationModalOpen] = useState(false);\r\n  const [showVerificationMessage, setShowVerificationMessage] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ show: false, type: '', message: '' });\r\n\r\n  // Use user data from AuthContext instead of localStorage\r\n  const [profileData, setProfileData] = useState({\r\n    fullName: user?.name || '',\r\n    courseYear: user?.course_year || '',\r\n    birthday: user?.birthday || '',\r\n    gender: user?.gender || '',\r\n    socialLink: user?.social_link || '',\r\n    contactNumber: user?.contact_number || '',\r\n    bio: user?.bio || '',\r\n    profileImage: user?.profile_picture || null,\r\n  });\r\n\r\n  const showAlert = (type, message) => {\r\n    setAlert({ show: true, type, message });\r\n    setTimeout(() => setAlert({ show: false, type: '', message: '' }), 5000);\r\n  };\r\n\r\n  // Update profile data when user changes\r\n  useEffect(() => {\r\n    if (user) {\r\n      setProfileData({\r\n        fullName: user.name || '',\r\n        courseYear: user.course_year || '',\r\n        birthday: user.birthday || '',\r\n        gender: user.gender || '',\r\n        socialLink: user.social_link || '',\r\n        contactNumber: user.contact_number || '',\r\n        bio: user.bio || '',\r\n        profileImage: user.profile_picture || null,\r\n      });\r\n    }\r\n  }, [user]);\r\n\r\n  const handleSave = async (data) => {\r\n    if (!isLoggedIn) {\r\n      showAlert('error', 'Please log in to update your profile');\r\n      return;\r\n    }\r\n\r\n    // Check if user account is suspended (client-side check)\r\n    if (user && user.verification_status === 'suspended') {\r\n      showAlert('error', 'Account Suspended: You cannot update your profile while your account is suspended. Please contact support for assistance.');\r\n      return;\r\n    }\r\n\r\n    // Check if user account is deactivated (client-side check)\r\n    if (user && user.verification_status === 'inactive') {\r\n      showAlert('error', 'Your account has been deactivated. Please contact support to reactivate your account.');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      // Prepare data for API\r\n      const updateData = {\r\n        name: data.fullName,\r\n        course_year: data.courseYear,\r\n        birthday: data.birthday,\r\n        gender: data.gender,\r\n        social_link: data.socialLink,\r\n        contact_number: data.contactNumber,\r\n        bio: data.bio,\r\n        profile_picture: data.profileImage,\r\n      };\r\n\r\n      // Remove empty values to avoid validation errors\r\n      Object.keys(updateData).forEach(key => {\r\n        if (updateData[key] === '' || updateData[key] === null) {\r\n          delete updateData[key];\r\n        }\r\n      });\r\n\r\n      console.log('Sending update data:', {\r\n        ...updateData,\r\n        profile_picture: updateData.profile_picture ? \r\n          `[Base64 Image - ${updateData.profile_picture.length} chars]` : \r\n          'null'\r\n      });\r\n\r\n      // Call API to update profile\r\n      const response = await userAPI.updateProfile(updateData);\r\n      \r\n      console.log('API Response:', response.data);\r\n      \r\n      if (response.data.success || response.data.user) {\r\n        // Get the updated user data from response\r\n        const returnedUser = response.data.user;\r\n        \r\n        console.log('Returned user profile_picture:', returnedUser?.profile_picture ? \r\n          `[${returnedUser.profile_picture.length} chars]` : 'null');\r\n        \r\n        // Update local profileData state with the form data (immediate update)\r\n        const updatedProfileData = {\r\n          fullName: data.fullName,\r\n          courseYear: data.courseYear,\r\n          birthday: data.birthday,\r\n          gender: data.gender,\r\n          socialLink: data.socialLink,\r\n          contactNumber: data.contactNumber,\r\n          bio: data.bio,\r\n          // Use the returned profile picture if available, otherwise use the submitted one\r\n          profileImage: returnedUser?.profile_picture || data.profileImage\r\n        };\r\n        \r\n        console.log('Setting profile data:', {\r\n          ...updatedProfileData,\r\n          profileImage: updatedProfileData.profileImage ? \r\n            `[${updatedProfileData.profileImage.length} chars]` : 'null'\r\n        });\r\n        \r\n        setProfileData(updatedProfileData);\r\n        \r\n        // Update user in AuthContext - ensure proper field mapping\r\n        const updatedUser = {\r\n          ...user,\r\n          ...returnedUser,\r\n          // Ensure profile_picture is properly set\r\n          profile_picture: returnedUser?.profile_picture || data.profileImage\r\n        };\r\n        \r\n        console.log('Setting user data:', {\r\n          ...updatedUser,\r\n          profile_picture: updatedUser.profile_picture ? \r\n            `[${updatedUser.profile_picture.length} chars]` : 'null'\r\n        });\r\n        \r\n        setUser(updatedUser);\r\n        \r\n        // Update localStorage\r\n        localStorage.setItem('userData', JSON.stringify(updatedUser));\r\n        \r\n        showAlert('success', 'Profile updated successfully!');\r\n        setIsModalOpen(false);\r\n        \r\n        // Force re-render by updating state\r\n        setProfileData(prev => ({ ...prev }));\r\n        \r\n      } else {\r\n        throw new Error('Profile update failed - no success response');\r\n      }\r\n    } catch (error) {\r\n      console.error('Profile update error:', error);\r\n      console.error('Error response:', error.response?.data);\r\n      \r\n      // Handle different types of errors with detailed messages\r\n      if (error.response?.status === 403) {\r\n        const data = error.response.data;\r\n        \r\n        // Handle suspended account with detailed restrictions\r\n        if (data.error === 'Account suspended' || error.restrictionDetails?.type === 'suspended') {\r\n          const details = error.restrictionDetails || data.restriction_details || {};\r\n          const actionMessage = details.blocked_action || details.blockedAction || 'updating your profile';\r\n          const contactInfo = details.contact_info || details.contactInfo || 'Please contact support for assistance.';\r\n          \r\n          showAlert('error', \r\n            `Account Suspended: You cannot perform this action (${actionMessage}). ${contactInfo}`\r\n          );\r\n        } else if (data.error === 'Account deactivated') {\r\n          showAlert('error', 'Your account has been deactivated. Please contact support to reactivate your account.');\r\n        } else {\r\n          showAlert('error', data.message || 'You do not have permission to update your profile.');\r\n        }\r\n      } else if (error.response?.status === 422) {\r\n        const errorData = error.response.data;\r\n        if (errorData.errors) {\r\n          const firstError = Object.values(errorData.errors)[0];\r\n          const errorMessage = Array.isArray(firstError) ? firstError[0] : firstError;\r\n          showAlert('error', `Validation Error: ${errorMessage}`);\r\n        } else {\r\n          showAlert('error', errorData.message || 'Please check your input and try again.');\r\n        }\r\n      } else if (!error.response) {\r\n        showAlert('error', 'Network error. Please check your internet connection and try again.');\r\n      } else {\r\n        showAlert('error', error.response?.data?.message || error.message || 'Failed to update profile. Please try again.');\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleCloseVerificationModal = () => {\r\n    setIsVerificationModalOpen(false);\r\n  };\r\n\r\n  const handleVerificationButtonClick = () => {\r\n    if (!user) return;\r\n\r\n    if (user.verified) {\r\n      // Already verified - show verified message\r\n      setShowVerificationMessage(true);\r\n      setTimeout(() => setShowVerificationMessage(false), 3000);\r\n    } else if (user.verification_status === 'pending') {\r\n      // Verification pending - show pending message\r\n      setShowVerificationMessage(true);\r\n      setTimeout(() => setShowVerificationMessage(false), 5000);\r\n    } else {\r\n      // Unverified (includes 'unverified', null, undefined, or any other status) - open upload modal\r\n      setIsVerificationModalOpen(true);\r\n    }\r\n  };\r\n\r\n  const handleUpload = async (file) => {\r\n    if (!isLoggedIn || !user) {\r\n      showAlert('error', 'Please log in to submit verification documents');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      // Create FormData for file upload\r\n      const formData = new FormData();\r\n      formData.append('userId', user.id);\r\n      formData.append('verificationData', JSON.stringify({\r\n        fileName: file.name,\r\n        submittedAt: new Date().toISOString()\r\n      }));\r\n      formData.append('document', file);\r\n\r\n      // Call the verification API\r\n      const response = await userAPI.verifyStudent(formData);\r\n      \r\n      if (response.data.success) {\r\n        showAlert('success', 'Verification document submitted successfully! Your request is now pending admin review.');\r\n        \r\n        // Update user verification status in context\r\n        const updatedUser = { \r\n          ...user, \r\n          verification_status: 'pending',\r\n          verification_submitted_at: new Date().toISOString()\r\n        };\r\n        setUser(updatedUser);\r\n        localStorage.setItem('userData', JSON.stringify(updatedUser));\r\n      } else {\r\n        showAlert('error', 'Failed to submit verification document. Please try again.');\r\n      }\r\n    } catch (error) {\r\n      console.error('Verification submission error:', error);\r\n      showAlert('error', error.response?.data?.error || error.response?.data?.message || 'Failed to submit verification document. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n      setIsVerificationModalOpen(false);\r\n    }\r\n  };\r\n\r\n  const activeTab = (() => {\r\n    switch (location.pathname) {\r\n      case '/profile': return 'post';\r\n      case '/earnings': return 'earnings';\r\n      case '/rental-management': return 'rentals';\r\n      default: return '';\r\n    }\r\n  })();\r\n\r\n  // Show login message if not authenticated\r\n  if (!isLoggedIn) {\r\n    return (\r\n      <main className='profile'>\r\n        <div className=\"profile-login-message\">\r\n          <h2>Please log in to view your profile</h2>\r\n          <Link to=\"/login\" className=\"login-link\">Go to Login</Link>\r\n        </div>\r\n      </main>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <main className='profile'>\r\n      {alert.show && (\r\n        <AlertMessage \r\n          type={alert.type} \r\n          message={alert.message} \r\n          onClose={() => setAlert({ show: false, type: '', message: '' })}\r\n          className=\"fixed-alert\"\r\n        />\r\n      )}\r\n      \r\n      <section className=\"profile-section\">\r\n        <div className=\"profile-background\">\r\n          <div className=\"profile-header\" />\r\n\r\n          <div className=\"profile-name-container\">\r\n            <div className=\"icon-and-name-wrapper\">\r\n              <div className=\"profile-image-section\">\r\n                <div \r\n                  className=\"profile-image-container\"\r\n                  onClick={() => setIsModalOpen(true)}\r\n                  title=\"Click to change profile picture\"\r\n                >\r\n                  {profileData.profileImage ? (\r\n                    <div className=\"profile-image-wrapper\">\r\n                      <img\r\n                        src={profileData.profileImage.startsWith('/storage/') \r\n                          ? `http://localhost:8000${profileData.profileImage}`\r\n                          : profileData.profileImage\r\n                        }\r\n                        alt=\"Profile\"\r\n                        className=\"profile-image\"\r\n                      />\r\n                    </div>\r\n                  ) : (\r\n                    <UserCircleIcon className=\"profile-default-icon\" />\r\n                  )}\r\n                </div>\r\n                \r\n                <button\r\n                  onClick={() => setIsModalOpen(true)}\r\n                  className=\"profile-edit-button\"\r\n                  disabled={loading}\r\n                  title=\"Edit Profile\"\r\n                >\r\n                  <PencilSquareIcon className='edit-icon' />\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"profile-name-section\">\r\n                <h1 className=\"profile-name\">{profileData.fullName || user?.name || 'Your Name'}</h1>\r\n                <p className=\"profile-course\">{profileData.courseYear || 'Course & Year'}</p>\r\n                <div className=\"profile-verification-status\">\r\n                  {user?.verified ? (\r\n                    <div className=\"verification-status-container\">\r\n                      <span className=\"verification-verified\">✓ Verified Student</span>\r\n                      {showVerificationMessage && (\r\n                        <div className=\"verification-message verified-message\">\r\n                          You are a verified student! 🎉\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ) : user?.verification_status === 'pending' ? (\r\n                    <div className=\"verification-status-container\">\r\n                      <button \r\n                        className=\"verification-pending-button\"\r\n                        onClick={handleVerificationButtonClick}\r\n                        disabled={loading}\r\n                      >\r\n                        ⏳ Verification Pending\r\n                      </button>\r\n                      {showVerificationMessage && (\r\n                        <div className=\"verification-message pending-message\">\r\n                          Your verification is in progress. Please wait for the admin to confirm it.\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"verification-status-container\">\r\n                      <button \r\n                        className=\"verification-button unverified\"\r\n                        onClick={handleVerificationButtonClick}\r\n                        disabled={loading}\r\n                      >\r\n                        📋 Verify Student Status\r\n                      </button>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"profile-nav\">\r\n            <Link \r\n              to=\"/profile\" \r\n              className={`profile-tab ${activeTab === 'post' ? 'active' : ''}`}\r\n            >\r\n              Post\r\n            </Link>\r\n            <Link \r\n              to=\"/earnings\" \r\n              className={`profile-tab ${activeTab === 'earnings' ? 'active' : ''}`}\r\n            >\r\n              Earnings\r\n            </Link>\r\n            <Link \r\n              to=\"/rental-management\" \r\n              className={`profile-tab ${activeTab === 'rentals' ? 'active' : ''}`}\r\n            >\r\n              Rentals\r\n            </Link>\r\n          </div>\r\n\r\n          {activeTab === 'post' && <PostContent profileData={profileData} user={user} />}\r\n          {activeTab === 'earnings' && <EarningsContent />}\r\n          {activeTab === 'rentals' && <RentalManagement />}\r\n        </div>\r\n      </section>\r\n\r\n      {isModalOpen && (\r\n        <EditProfileModal\r\n          isOpen={isModalOpen}\r\n          onClose={() => setIsModalOpen(false)}\r\n          onSave={handleSave}\r\n          profileData={profileData}\r\n          user={user}\r\n          loading={loading}\r\n        />\r\n      )}\r\n\r\n      {isVerificationModalOpen && (\r\n        <StudentVerificationModal\r\n          isOpen={isVerificationModalOpen}\r\n          onClose={handleCloseVerificationModal}\r\n          onUpload={handleUpload}\r\n          loading={loading}\r\n        />\r\n      )}\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default Profile;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}